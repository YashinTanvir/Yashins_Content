{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./RoomsPage.css';import groupsIcon from'../assets/group.png';import backIcon from'../assets/back.png';// Import the back icon\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoomsPage=()=>{const[rooms,setRooms]=useState([]);const[showCreateRoom,setShowCreateRoom]=useState(false);const[newRoomName,setNewRoomName]=useState('');const navigate=useNavigate();useEffect(()=>{fetch('http://localhost:5001/exchanges').then(response=>response.json()).then(data=>setRooms(data)).catch(error=>console.error('Error fetching exchange names:',error));},[]);const handleRoomClick=exchangeName=>{navigate(`/chat/${exchangeName}`);};const handleCreateRoom=()=>{if(newRoomName.trim()===''){alert('Please enter a room name.');return;}fetch('http://localhost:5001/create-exchange',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({exchangeName:newRoomName})}).then(response=>response.json()).then(data=>{if(data.success){setRooms([...rooms,newRoomName]);setNewRoomName('');setShowCreateRoom(false);}else{alert('Failed to create room. Please try again.');}}).catch(error=>console.error('Error creating exchange:',error));};const handleBackClick=()=>{navigate('/chats');// Navigate directly to the ChatListPage\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"rooms-page\",children:[/*#__PURE__*/_jsx(\"img\",{src:backIcon,alt:\"Back\",className:\"back-icon\",onClick:handleBackClick}),\" \",/*#__PURE__*/_jsx(\"h1\",{children:\"Available Rooms To Join!\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"rooms-list\",children:rooms.map((room,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"room-item\",onClick:()=>handleRoomClick(room),children:[/*#__PURE__*/_jsx(\"img\",{src:groupsIcon,alt:room,className:\"room-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:room})]},index))}),showCreateRoom&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-room-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter room name\",value:newRoomName,onChange:e=>setNewRoomName(e.target.value),className:\"new-room-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateRoom,className:\"create-room-button\",children:\"Create Room\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"proceed-button\",onClick:()=>setShowCreateRoom(!showCreateRoom),children:showCreateRoom?'Cancel':'Create Room'})]});};export default RoomsPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","groupsIcon","backIcon","jsx","_jsx","jsxs","_jsxs","RoomsPage","rooms","setRooms","showCreateRoom","setShowCreateRoom","newRoomName","setNewRoomName","navigate","fetch","then","response","json","data","catch","error","console","handleRoomClick","exchangeName","handleCreateRoom","trim","alert","method","headers","body","JSON","stringify","success","handleBackClick","className","children","src","alt","onClick","map","room","index","type","placeholder","value","onChange","e","target"],"sources":["/Users/tanvirrahman/Desktop/chat-app/src/components/RoomsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './RoomsPage.css';\nimport groupsIcon from '../assets/group.png';\nimport backIcon from '../assets/back.png'; // Import the back icon\n\nconst RoomsPage = () => {\n    const [rooms, setRooms] = useState([]);\n    const [showCreateRoom, setShowCreateRoom] = useState(false);\n    const [newRoomName, setNewRoomName] = useState('');\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        fetch('http://localhost:5001/exchanges')\n            .then(response => response.json())\n            .then(data => setRooms(data))\n            .catch(error => console.error('Error fetching exchange names:', error));\n    }, []);\n\n    const handleRoomClick = (exchangeName) => {\n        navigate(`/chat/${exchangeName}`);\n    };\n\n    const handleCreateRoom = () => {\n        if (newRoomName.trim() === '') {\n            alert('Please enter a room name.');\n            return;\n        }\n\n        fetch('http://localhost:5001/create-exchange', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ exchangeName: newRoomName }),\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    setRooms([...rooms, newRoomName]);\n                    setNewRoomName('');\n                    setShowCreateRoom(false);\n                } else {\n                    alert('Failed to create room. Please try again.');\n                }\n            })\n            .catch(error => console.error('Error creating exchange:', error));\n    };\n\n    const handleBackClick = () => {\n        navigate('/chats'); // Navigate directly to the ChatListPage\n    };\n\n    return (\n        <div className=\"rooms-page\">\n            <img src={backIcon} alt=\"Back\" className=\"back-icon\" onClick={handleBackClick} /> {/* Add the back button */}\n            <h1>Available Rooms To Join!</h1>\n            <ul className=\"rooms-list\">\n                {rooms.map((room, index) => (\n                    <li key={index} className=\"room-item\" onClick={() => handleRoomClick(room)}>\n                        <img src={groupsIcon} alt={room} className=\"room-icon\" />\n                        <span>{room}</span>\n                    </li>\n                ))}\n            </ul>\n            {showCreateRoom && (\n                <div className=\"create-room-container\">\n                    <input\n                        type=\"text\"\n                        placeholder=\"Enter room name\"\n                        value={newRoomName}\n                        onChange={(e) => setNewRoomName(e.target.value)}\n                        className=\"new-room-input\"\n                    />\n                    <button onClick={handleCreateRoom} className=\"create-room-button\">\n                        Create Room\n                    </button>\n                </div>\n            )}\n            <button\n                className=\"proceed-button\"\n                onClick={() => setShowCreateRoom(!showCreateRoom)}\n            >\n                {showCreateRoom ? 'Cancel' : 'Create Room'}\n            </button>\n        </div>\n    );\n};\n\nexport default RoomsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}